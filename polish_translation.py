#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Фінальне полірування перекладу
"""

import re

def polish_translation(file_path):
    """Фінальне полірування українського перекладу"""

    with open(file_path, 'r', encoding='utf-8-sig') as f:
        content = f.read()

    # Список всіх залишкових російських слів та їх замін
    final_replacements = [
        # Залишки в назвах
        ("месяц", "місяць"),
        ("Истощение", "Виснаження"),
        ("Стоимость", "Вартість"),
        ("передвижения", "пересування"),
        ("высадки", "висадки"),
        ("Игнорирование", "Ігнорування"),
        ("Рівень крепости", "Рівень фортеці"),
        ("Создание", "Створення"),
        ("контроля", "контролю"),
        ("море", "морі"),
        ("Межа восстановления", "Межа відновлення"),
        ("Культурные традиции", "Культурні традиції"),
        ("влияние", "вплив"),
        ("Местное", "Місцеве"),
        ("Вложения", "Вкладення"),
        ("стабильность", "стабільність"),
        ("стабильности", "стабільності"),
        ("Престиж", "Престиж"),
        ("престижа", "престижу"),
        ("Сила обрядов", "Сила обрядів"),
        ("обрядов", "обрядів"),

        # В описах
        (" его ", " його "),
        (" к ", " до "),
        (" на то, ", " на те, "),
        (" ли ", " чи "),
        (" как ", " як "),
        (" это", " це"),
        (" этот", " цей"),
        (" этой", " цієї"),
        (" между ", " між "),
        (" с ", " з "),
        (" вне ", " поза "),
        (" без ", " без "),
        (" або ", " або "),
        ("игнорировать", "ігнорувати"),
        ("распространять", "поширювати"),
        ("происходит", "відбувається"),
        ("высадиться", "висадитися"),
        ("соседством", "сусідством"),
        ("сушей", "суходолом"),
        ("пополняться", "поповнюватися"),
        ("не достигающий", "що не досягає"),
        ("достигающий", "що досягає"),
        ("перемещается", "переміщується"),

        # Виправлення неправильних відмінків
        ("районуми", "районами"),
        ("районух", "районах"),
        ("Воздействует", "Впливає"),
        ("Даёт", "Дає"),
        ("выраженную", "виражену"),
        ("отримуваного", "що отримує"),
        ("от поточної", "від поточної"),

        # В Concept() - російські слова
        ("'усталости від війни'", "'втоми від війни'"),
        ("'культурные традиции'", "'культурні традиції'"),
        ("'основной культуры'", "'основної культури'"),
        ("'влияние'", "'вплив'"),
        ("'вложениям в стабильность'", "'вкладення у стабільність'"),
        ("'бюджета'", "'бюджету'"),
        ("'стабильности'", "'стабільності'"),
        ("'престижа'", "'престижу'"),
        ("'зону контроля'", "'зону контролю'"),
        ("'укрепления'", "'укріплення'"),
        ("'порта'", "'порту'"),

        # Додаткові виправлення
        ("нашей", "нашої"),
        ("наш", "наш"),
        ("штраф", "штраф"),
        ("бонус", "бонус"),
    ]

    for ru, uk in final_replacements:
        content = content.replace(ru, uk)

    # Записуємо результат
    with open(file_path, 'w', encoding='utf-8-sig') as f:
        f.write(content)

    print("Фінальне полірування завершено!")

    # Підрахунок залишкових російських слів
    russian_patterns = [
        'может', 'можно', 'нужно', 'должен', 'будет', 'будут',
        'влияет', 'определяет', 'необходимо', 'количество',
        'который', 'которая', 'которые', 'которую',
        'месяц', 'как ', ' ли ', ' это', 'нашей', 'между'
    ]

    found_count = 0
    for pattern in russian_patterns:
        count = content.count(pattern)
        if count > 5:  # Показуємо тільки якщо більше 5 входжень
            print(f"  Ув ага: '{pattern}' - {count} входжень")
            found_count += count

    if found_count == 0:
        print("\nВідмінно! Переклад чистий від російської мови!")
    else:
        print(f"\nЗнайдено {found_count} можливих російських слів.")

if __name__ == "__main__":
    file_path = "/Users/furmonenko/Desktop/eu5-ukrainian-localization/main_menu/localization/english/modifier_types_l_english.yml"
    polish_translation(file_path)
    print("\n" + "="*60)
    print("Фінальне полірування завершено!")
    print("="*60)
