#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Скрипт для перекладу modifier_types_l_english.yml з російської на українську
з правильним застосуванням відмінків через Concept() формат
"""

import re
import sys

# Словник перекладів з російської на українську (базові слова)
RU_TO_UK = {
    # Базові дієслова та слова
    "Влияет на": "Впливає на",
    "Меняет": "Змінює",
    "Определяет": "Визначає",
    "Повышение": "Підвищення",
    "Понижение": "Зниження",
    "Позволяет": "Дозволяє",
    "Влияет на то": "Впливає на те",
    "Меняет процент": "Змінює процент",
    "величину": "величину",
    "количество": "кількість",
    "скорость": "швидкість",
    "максимально возможный": "максимально можливий",
    "максимальный": "максимальний",
    "максимальную": "максимальну",
    "минимальный": "мінімальний",
    "фиксированную": "фіксовану",
    "процентную": "процентну",
    "ежемесячно": "щомісяця",
    "каждый месяц": "кожного місяця",
    "каждый час": "кожної години",
    "ежедневно": "щодня",

    # Концепти (будуть оброблятися окремо)
    "держава": "держава",
    "державу": "державу",
    "державы": "держави",
    "державе": "державі",
    "державой": "державою",

    "район": "район",
    "района": "району",
    "району": "району",
    "районе": "районі",
    "районом": "районом",
    "районы": "райони",
    "районов": "районів",
    "районах": "районах",
    "районами": "районами",

    "война": "війна",
    "войны": "війни",
    "войну": "війну",
    "войной": "війною",
    "войне": "війні",

    "полк": "полк",
    "полка": "полка",
    "полку": "полку",
    "полком": "полком",
    "полки": "полки",
    "полков": "полків",

    "корабль": "корабель",
    "корабля": "корабля",
    "кораблю": "кораблю",
    "кораблём": "кораблем",
    "корабли": "кораблі",
    "кораблей": "кораблів",

    "армия": "армія",
    "армии": "армії",
    "армию": "армію",
    "армией": "армією",
    "армий": "армій",

    "флот": "флот",
    "флота": "флоту",
    "флоту": "флоту",
    "флотом": "флотом",
    "флоты": "флоти",
    "флотов": "флотів",

    "пища": "їжа",
    "пищи": "їжі",
    "пищу": "їжу",
    "пищей": "їжею",

    "группы населения": "населення",
    "групп населения": "населення",
    "группам населения": "населенню",

    "битва": "битва",
    "битвы": "битви",
    "битве": "битві",
    "битвой": "битвою",

    "акватория": "акваторія",
    "акватории": "акваторії",
    "акваторию": "акваторію",
    "акваторией": "акваторією",
    "акваторий": "акваторій",
    "акваториях": "акваторіях",

    "провинция": "провінція",
    "провинции": "провінції",
    "провинцию": "провінцію",
    "провинцией": "провінцією",
    "провинций": "провінцій",
    "провинциях": "провінціях",

    # Прикметники
    "текущего": "поточного",
    "текущей": "поточної",
    "текущих": "поточних",
    "возможное": "можливе",
    "возможную": "можливу",
    "возможный": "можливий",
    "необходимых": "необхідних",
    "необходимого": "необхідного",
    "соседний": "сусідній",
    "соседних": "сусідніх",
    "соседствующих": "сусідніх",
    "дружественных": "дружніх",
    "враждебных": "ворожих",
    "враждебную": "ворожу",
    "национальном": "національному",

    # Прийменники та сполучники
    " в ": " у ",
    " на ": " на ",
    " для ": " для ",
    " от ": " від ",
    " из ": " з ",
    " при ": " при ",
    " по ": " по ",
    " через ": " через ",
    " вдоль ": " вздовж ",
    " против ": " проти ",
    " над ": " над ",
    " под ": " під ",
}

def translate_russian_to_ukrainian(text):
    """Переклад російського тексту на українську"""
    result = text

    # Застосовуємо всі заміни зі словника
    for ru, uk in RU_TO_UK.items():
        result = result.replace(ru, uk)

    return result

def process_file(russian_file, output_file):
    """Обробка російського файлу та створення українського"""

    print(f"Читання російського файлу {russian_file}...")

    # Читаємо російський файл
    with open(russian_file, 'r', encoding='utf-8-sig') as f:
        content = f.read()

    print(f"Розмір файлу: {len(content)} байт")

    # Обробляємо рядок за рядком
    lines = content.split('\n')
    translated_lines = []

    for line_num, line in enumerate(lines, 1):
        # Перший рядок змінюємо на l_english
        if line_num == 1:
            translated_lines.append('l_english:')
            continue

        # Пропускаємо порожні рядки
        if not line.strip():
            translated_lines.append(line)
            continue

        # Перекладаємо рядок
        translated_line = translate_russian_to_ukrainian(line)
        translated_lines.append(translated_line)

        if line_num % 500 == 0:
            print(f"Оброблено {line_num} рядків...")

    result = '\n'.join(translated_lines)

    # Записуємо результат з BOM
    with open(output_file, 'w', encoding='utf-8-sig') as f:
        f.write(result)

    print(f"\nПереклад завершено!")
    print(f"Результат збережено у {output_file}")
    print(f"Всього перекладено {len(lines)} рядків")

if __name__ == "__main__":
    russian_file = "/Users/furmonenko/Desktop/eu5-ukrainian-localization/reference/russian/modifier_types_l_russian.yml"
    output_file = "/Users/furmonenko/Desktop/eu5-ukrainian-localization/main_menu/localization/english/modifier_types_l_english.yml"

    process_file(russian_file, output_file)
    print("\nГотово!")
