#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
Скрипт для перекладу triggers_l_english.yml (рядки 0-2000)
Переклад з російської на українську мову
"""

import re

def translate_line(line_num, text):
    """
    Переклад одного рядка
    Зберігає всі макроси: [GetName], $VAR$, #ONCLICK, тощо
    """

    # Словник перекладів (російська -> українська)
    translations = {
        # Базові слова
        "Должно выполняться що-то з перечисленного": "Має виконуватися що-небудь із переліченого",
        "Всегда": "Завжди",
        "Никогда": "Ніколи",
        "из следующих": "з наступних",
        "выполняется": "виконується",
        "сейчас": "зараз",

        # Області видимості та порівняння
        "обладает рангом": "має ранг",
        "НЕ обладает рангом": "НЕ має ранг",
        "Район": "Район",
        "обладает": "має",
        "Используется тип парламента": "Використовується тип парламенту",
        "Не используется тип парламента": "Не використовується тип парламенту",
        "Используется": "Використовується",
        "Не используется": "Не використовується",
        "Сейчас обсуждается": "Зараз обговорюється",
        "сейчас НЕ обсуждается": "зараз НЕ обговорюється",
        "заседает в": "засідає в",
        "НЕ заседает в": "НЕ засідає в",

        # Родинні зв'язки
        "Действующим правящим": "Діючим правлячим",
        "є отцом": "є батьком",
        "НЕ є отцом": "НЕ є батьком",
        "є матерью": "є матір'ю",
        "НЕ є матерью": "НЕ є матір'ю",
        "исповедует": "сповідує",
        "НЕ исповедует": "НЕ сповідує",
        "Принадлежит к династії": "Належить до династії",
        "НЕ принадлежит к династії": "НЕ належить до династії",
        "НЕ династія": "НЕ династія",

        # Географія
        "знаходиться в": "знаходиться в",
        "НЕ знаходиться в": "НЕ знаходиться в",
        "Принадлежит к": "Належить до",
        "НЕ принадлежит к": "НЕ належить до",
        "говорит на": "говорить на",
        "НЕ говорит на": "НЕ говорить на",

        # Держави та політика
        "Держава": "Держава",
        "Форма правления НЕ": "Форма правління НЕ",
        "є объединением": "є об'єднанням",
        "НЕ є объединением": "НЕ є об'єднанням",
        "Придерживается школы": "Дотримується школи",
        "НЕ придерживается школы": "НЕ дотримується школи",
        "Правило престолонаследия": "Правило престолонаслідування",

        # Персонажі та династії
        "Родиной династії": "Батьківщиною династії",
        "є": "є",
        "НЕ є": "НЕ є",
        "исповедуют": "сповідують",
        "НЕ исповедуют": "НЕ сповідують",
        "принадлежат к": "належать до",
        "НЕ принадлежат к": "НЕ належать до",

        # Економіка
        "Культурное влияние": "Культурний вплив",
        "превосходит влияние": "перевершує вплив",
        "НЕ превосходит влияние": "НЕ перевершує вплив",
        "Процент групп населення": "Відсоток груп населення",
        "більше або равен": "більше або дорівнює",
        "більше": "більше",
        "менше": "менше",
        "Количество имеющихся": "Кількість наявних",
        "більше, чем": "більше ніж",
        "менше, чем": "менше ніж",
        "Уровень": "Рівень",
        "выше": "вище",
        "Престиж": "Престиж",
        "більше або равно": "більше або дорівнює",
        "Количество имеющегося": "Кількість наявного",
        "Количество имеющегося у": "Кількість наявного у",

        # Виробництво та торгівля
        "Производит": "Виробляє",
        "НЕ производит": "НЕ виробляє",
        "Выполняет действие": "Виконує дію",
        "НЕ выполняет действие": "НЕ виконує дію",
        "Текущее задание": "Поточне завдання",
        "Целью є": "Метою є",
        "Целью є НЕ": "Метою є НЕ",
        "мнение о": "думка про",
        "больше или равно": "більше або дорівнює",
        "больше": "більше",

        # Війна та дипломатія
        "лидер атакующей стороны": "лідер атакуючої сторони",
        "НЕ лидер атакующей стороны": "НЕ лідер атакуючої сторони",
        "лидер обороняющейся стороны": "лідер сторони, що обороняється",
        "НЕ лидер обороняющейся стороны": "НЕ лідер сторони, що обороняється",
        "лидер объединения": "лідер об'єднання",
        "предыдущий лидер объединения": "попередній лідер об'єднання",
        "НЕ предыдущий лидер объединения": "НЕ попередній лідер об'єднання",

        # Релігія
        "віра": "віра",
        "віру": "віру",
        "культуре": "культурі",
        "культури": "культури",
        "культурою": "культурою",
        "культуру": "культуру",

        # Провінції та локації
        "Владелец": "Власник",
        "знаходиться в провінції": "знаходиться в провінції",
        "знаходиться НЕ в провінції": "знаходиться НЕ в провінції",
        "знаходиться в области": "знаходиться в області",
        "знаходиться в регионе": "знаходиться в регіоні",
        "знаходиться в макрорегионе": "знаходиться в макрорегіоні",
        "знаходиться на континенте": "знаходиться на континенті",
        "НЕ знаходиться в регионе": "НЕ знаходиться в регіоні",
        "НЕ знаходиться в макрорегионе": "НЕ знаходиться в макрорегіоні",
        "НЕ знаходиться на континенте": "НЕ знаходиться на континенті",

        # Будівлі та виробництво
        "Принадлежит": "Належить",
        "НЕ принадлежит": "НЕ належить",
        "Служит": "Служить",
        "НЕ служит": "НЕ служить",
        "Живёт в": "Живе в",
        "НЕ живёт в": "НЕ живе в",
        "Бунтует проти": "Бунтує проти",
        "НЕ бунтует проти": "НЕ бунтує проти",
        "Исследует": "Досліджує",
        "НЕ исследует": "НЕ досліджує",
        "Происходит в": "Відбувається в",
        "Происходит НЕ в": "Відбувається НЕ в",
        "є должностью в совете": "є посадою в раді",
        "НЕ є должностью в совете": "НЕ є посадою в раді",
        "Служит в интересах": "Служить в інтересах",
        "НЕ служит в интересах": "НЕ служить в інтересах",
        "є частью": "є частиною",
        "НЕ є частью": "НЕ є частиною",

        # Верховні сюзерени
        "Верховным": "Верховним",

        # Списки та кількість
        "Любой": "Будь-який",
        "Любая": "Будь-яка",
        "Любое": "Будь-яке",
        "Любые": "Будь-які",
        "Ни один з": "Жоден з",
        "Ни одна з": "Жодна з",
        "Ни одне з": "Жодне з",
        "всі": "всі",
        "Не всі": "Не всі",
        "Каждый": "Кожен",
        "Каждая": "Кожна",
        "Каждое": "Кожне",
        "Случайный": "Випадковий",
        "Случайная": "Випадкова",
        "Случайное": "Випадкове",
        "из": "з",
        "кроме": "крім",

        # Війна
        "Участников війни": "Учасників війни",
        "участник війни": "учасник війни",
        "участники війни": "учасники війни",
        "атакующая держава": "держава, що атакує",
        "атакующие державы": "держави, що атакують",
        "обороняющаяся держава": "держава, що обороняється",
        "обороняющиеся державы": "держави, що обороняються",
        "вражеский лидер війни": "ворожий лідер війни",
        "вражеские лидеры війни": "вороже лідери війни",
        "сражающаяся на стороне": "що б'ється на боці",
        "сражающиеся на стороне": "що б'ються на боці",

        # Локації
        "на території": "на території",
        "в области": "в області",
        "в регионе": "в регіоні",
        "в макрорегионе": "в макрорегіоні",
        "на континенте": "на континенті",
        "в провінції": "в провінції",
        "в пределах": "у межах",
        "в пределах региона": "у межах регіону",

        # Відносини
        "з якої у нас есть отношения": "з якою у нас є відносини",
        "з которыми у нас есть отношения": "з якими у нас є відносини",
        "типа": "типу",

        # Унії та партнери
        "по унии": "за унією",

        # Інші
        "присоединяемая": "що приєднується",
        "присоединяемые": "що приєднуються",
        "присоединяемых": "що приєднуються",
        "присоединяющая": "що приєднує",
        "присоединяющие": "що приєднують",
        "присоединяющих": "що приєднують",
        "ведущая": "що веде",
        "ведущих": "що ведуть",
        "ведущие": "що ведуть",

        # Міста та будівлі
        "на териториі": "на території",
        "частично або полностью находящаяся": "частково або повністю що знаходиться",
        "частично або полностью находящиеся": "частково або повністю що знаходяться",
        "частично або полностью находящихся": "частково або повністю що знаходяться",
        "в якої есть": "в якій є",
        "в яких есть": "в яких є",
        "в которых есть": "в яких є",
        "контролируемый": "контрольований",
        "контролируемых": "контрольованих",
        "контролируемые": "контрольовані",
        "пограничный": "прикордонний",
        "пограничных": "прикордонних",
        "пограничные": "прикордонні",
        "политический пограничный": "політичний прикордонний",
        "политических пограничных": "політичних прикордонних",
        "политические пограничные": "політичні прикордонні",

        # Релігійні особливості
        "достигнуты какие-либо": "досягнуті будь-які",
        "нет достигнутых": "немає досягнутих",
        "достигнуты всі": "досягнуті всі",
        "достигнуты не всі": "досягнуті не всі",
        "Достигнутых": "Досягнутих",

        # Підрозділи
        "принадлежащее": "що належить",
        "принадлежащих": "що належать",
        "принадлежащие": "що належать",
        "возможный": "можливий",
        "возможных": "можливих",
        "возможные": "можливі",
        "другая": "інша",
        "других": "інших",
        "другие": "інші",
        "требуемые": "необхідні",
        "действующая": "діюча",
        "действующих": "діючих",
        "действующие": "діючі",
        "діюче": "діюче",

        # Ринки
        "торгующая на рынке": "що торгує на ринку",

        # Назви концептів (залишаємо як є, бо вони в Concept())
        # Ці слова в одинарних лапках не перекладаємо
    }

    # Якщо це не рядок з перекладом (коментар або ключ), повертаємо як є
    if not ':' in text or text.strip().startswith('#'):
        return text

    # Розділяємо на ключ та значення
    parts = text.split(':', 1)
    if len(parts) != 2:
        return text

    key = parts[0]
    value = parts[1]

    # Перекладаємо тільки значення
    translated_value = value
    for ru, uk in translations.items():
        # Використовуємо word boundaries для точнішого перекладу
        translated_value = re.sub(r'\b' + re.escape(ru) + r'\b', uk, translated_value)

    return key + ':' + translated_value


def main():
    input_file = '/Users/furmonenko/Desktop/eu5-ukrainian-localization/main_menu/localization/english/triggers_l_english.yml'
    output_file = input_file

    print("Читання файлу...")
    with open(input_file, 'r', encoding='utf-8-sig') as f:
        lines = f.readlines()

    print(f"Всього рядків у файлі: {len(lines)}")
    print("Переклад рядків 0-2000...")

    # Перекладаємо перші 2000 рядків
    for i in range(min(2000, len(lines))):
        if i == 0:
            # Перший рядок з BOM залишаємо як є
            continue
        lines[i] = translate_line(i, lines[i])

        if (i + 1) % 100 == 0:
            print(f"Оброблено {i + 1} рядків...")

    print("Запис файлу...")
    with open(output_file, 'w', encoding='utf-8-sig') as f:
        f.writelines(lines)

    print(f"✓ Переклад завершено! Оброблено рядків: {min(2000, len(lines))}")
    print(f"Файл збережено: {output_file}")


if __name__ == '__main__':
    main()
