#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Виправлення описів у units_l_english.yml
Повна заміна сумішей російсь��о-української мови
"""

import re

# Розширений словник для описів
DESC_DICT = {
    # Базові іменники що залишились
    'оружие': 'зброя',
    'Оружие': 'Зброя',
    'оружия': 'зброї',
    'оружию': 'зброї',
    'оружием': 'зброєю',
    'снаряд': 'снаряд',
    'снаряды': 'снаряди',
    'снарядов': 'снарядів',
    'специалист': 'спеціаліст',
    'специалиста': 'спеціаліста',
    'специалистов': 'спеціалістів',
    'расчёт': 'розрахунок',
    'расчёта': 'розрахунку',
    'расчётом': 'розрахунком',
    'набор': 'набір',
    'набора': 'набору',
    'набором': 'набором',
    'цель': 'мета',
    'цели': 'мети',
    'целью': 'метою',
    'поддержка': 'підтримка',
    'поддержки': 'підтримки',
    'поддержкой': 'підтримкою',
    'сила': 'сила',
    'силы': 'сили',
    'силу': 'силу',
    'силой': 'силою',
    'массив': 'масив',
    'масса': 'маса',
    'массы': 'маси',
    'массой': 'масою',
    'строй': 'стрій',
    'строя': 'строю',
    'строю': 'строю',
    'строем': 'строєм',
    'осадка': 'осадка',
    'осадки': 'осадки',
    'осадкой': 'осадкою',
    'весло': 'весло',
    'вёсла': 'весла',
    'вёслами': 'веслами',
    'движение': 'рух',
    'движения': 'руху',
    'движением': 'рухом',
    'мачта': 'щогла',
    'мачты': 'щогли',
    'мачтами': 'щоглами',
    'палуба': 'палуба',
    'палубы': 'палуби',
    'палубами': 'палубами',
    'ведение': 'ведення',
    'ведения': 'ведення',
    'демонстрация': 'демонстрація',
    'демонстрации': 'демонстрації',
    'скорость': 'швидкість',
    'скорости': 'швидкості',
    'скоростью': 'швидкістю',
    'простота': 'простота',
    'простоты': 'простоти',
    'простотой': 'простотою',
    'навигация': 'навігація',
    'навигации': 'навігації',
    'перевозка': 'перевезення',
    'перевозки': 'перевезення',
    'перевозкой': 'перевезенням',

    # Прикметники російські
    'дальний': 'дальній',
    'дальнего': 'дальнього',
    'дальней': 'дальньої',
    'дальнем': 'дальньому',
    'дальним': 'дальнім',
    'чрезвычайно': 'надзвичайно',
    'разнообразный': 'різноманітний',
    'разнообразная': 'різноманітна',
    'разнообразное': 'різноманітне',
    'разнообразные': 'різноманітні',
    'высокий': 'високий',
    'высокая': 'висока',
    'высокое': 'високе',
    'высокие': 'високі',
    'ударный': 'ударний',
    'ударная': 'ударна',
    'ударное': 'ударне',
    'ударные': 'ударні',
    'пеший': 'піший',
    'пешая': 'піша',
    'пешее': 'піше',
    'пешие': 'піші',
    'пешем': 'пішому',
    'регулярный': 'регулярний',
    'регулярная': 'регулярна',
    'регулярное': 'регулярне',
    'регулярные': 'регулярні',
    'регулярного': 'регулярного',
    'прибрежный': 'прибережний',
    'прибрежная': 'прибережна',
    'прибрежное': 'прибережне',
    'прибрежные': 'прибережні',
    'прибрежных': 'прибережних',
    'смешанный': 'змішаний',
    'смешанная': 'змішана',
    'смешанное': 'змішане',
    'смешанные': 'змішані',
    'пассажирский': 'пасажирський',
    'пассажирская': 'пасажирська',
    'пассажирское': 'пасажирське',
    'пассажирские': 'пасажирські',
    'торговый': 'торговий',
    'торговая': 'торгова',
    'торговое': 'торгове',
    'торговые': 'торгові',
    'малый': 'малий',
    'малая': 'мала',
    'малое': 'мале',
    'малые': 'малі',
    'малой': 'малої',
    'относительно': 'відносно',
    'дешёвый': 'дешевий',
    'дешёвая': 'дешева',
    'дешёвое': 'дешеве',
    'дешёвые': 'дешеві',
    'ориентированный': 'орієнтований',
    'ориентированная': 'орієнтована',
    'ориентированное': 'орієнтоване',
    'ориентированные': 'орієнтовані',

    # Дієслова
    'управляемое': 'керований',
    'управляемая': 'керована',
    'управляемый': 'керований',
    'управляемые': 'керовані',
    'запускает': 'запускає',
    'запускают': 'запускають',
    'призначені': 'призначені',  # вже українське
    'прорыва': 'прориву',
    'разрушения': 'руйнування',
    'укреплений': 'укріплень',
    'укрепления': 'укріплення',
    'являют': 'являють',
    'собой': 'собою',
    'отличаются': 'відрізняються',
    'отличается': 'відрізняється',
    'сражаются': 'борються',
    'борються': 'борються', # вже правильно
    'борется': 'бореться',
    'становлять': 'становлять',  # вже правильно
    'приводимые': 'які приводяться',
    'приводимое': 'яке приводиться',
    'приводимый': 'який приводиться',
    'оснащённый': 'оснащений',
    'оснащённая': 'оснащена',
    'оснащённое': 'оснащене',
    'оснащённые': 'оснащені',
    'используемый': 'використовуваний',
    'используемая': 'використовувана',
    'используемое': 'використовуване',
    'используемые': 'використовувані',

    # Слова-зв'язки
    'который': 'який',
    'которая': 'яка',
    'которое': 'яке',
    'которые': 'які',
    'которых': 'яких',
    'которым': 'яким',
    'чаще': 'частіше',
    'всего': 'всього',
    'всех': 'всіх',
    'всем': 'всім',
    'всё': 'все',

    # Прийменники
    'дальнего': 'дальнього',
    'ближнего': 'ближнього',
    'дальней': 'дальньої',
    'ближней': 'ближньої',

    # Інше
    'Тяжёлый': 'Важкий',
    'тяжёлый': 'важкий',
    'Тяжёлая': 'Важка',
    'тяжёлая': 'важка',
    'Тяжёлое': 'Важке',
    'тяжёлое': 'важке',
    'Тяжёлые': 'Важкі',
    'тяжёлые': 'важкі',
    'Лёгкий': 'Легкий',
    'лёгкий': 'легкий',
    'Лёгкая': 'Легка',
    'лёгкая': 'легка',
    'Лёгкое': 'Легке',
    'лёгкое': 'легке',
    'Лёгкие': 'Легкі',
    'лёгкие': 'легкі',
    'Вспомогательный': 'Допоміжний',
    'вспомогательный': 'допоміжний',
    'Вспомогательная': 'Допоміжна',
    'вспомогательная': 'допоміжна',
    'Вспомогательное': 'Допоміжне',
    'вспомогательное': 'допоміжне',
    'Вспомогательные': 'Допоміжні',
    'вспомогательные': 'допоміжні',

    'основной': 'основний',
    'основная': 'основна',
    'основное': 'основне',
    'основные': 'основні',
    'основных': 'основних',
    'основному': 'основному',
    'основным': 'основним',
}

def fix_description(text):
    """Виправити опис"""
    for ru, ua in DESC_DICT.items():
        # Заміна цілих слів
        text = re.sub(r'\b' + re.escape(ru) + r'\b', ua, text)
    return text

def main():
    """Головна функція"""
    filepath = "/Users/furmonenko/Desktop/eu5-ukrainian-localization/main_menu/localization/english/units_l_english.yml"

    print("Виправлення описів у units_l_english.yml...")
    print("=" * 80)

    with open(filepath, 'r', encoding='utf-8-sig') as f:
        lines = f.readlines()

    new_lines = []
    fixed = 0

    for i, line in enumerate(lines, 1):
        if line.strip().startswith('#') or not line.strip() or i == 1:
            new_lines.append(line)
            continue

        match = re.match(r'^(\s*)([^:]+):\s*"(.+)"(.*)$', line.rstrip())
        if match:
            indent, key, text, suffix = match.groups()
            original = text
            text = fix_description(text)

            if text != original:
                fixed += 1

            new_lines.append(f'{indent}{key}: "{text}"{suffix}\n')
        else:
            new_lines.append(line)

        if i % 200 == 0:
            print(f"  Оброблено {i}/{len(lines)} рядків...")

    with open(filepath, 'w', encoding='utf-8-sig') as f:
        f.writelines(new_lines)

    print("=" * 80)
    print(f"✓ Описи виправлено!")
    print(f"  Виправлено: {fixed} рядків")

if __name__ == "__main__":
    main()
